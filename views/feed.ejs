<% if (typeof success !== 'undefined' && success) { %>
    <div class="alert alert-success" id="alert-message">
        <% if (success === 'post_criado' || success === 'teste_posts_criados') { %>
            ✓ Postagem criada com sucesso!
        <% } %>
    </div>
<% } else if (error === 'creation_failed') { %>
    <div class="alert alert-error" id="alert-message">
        ✗ Erro ao criar postagem. Tente novamente.
    </div>
<% } %>

<section class="feed-container">
    <% if (posts && posts.length > 0) { %>
        <% posts.forEach(post => { %>
            <article class="post-card">
                <% if (post.imagens && post.imagens.length > 0) { %>
                    <div class="post-images">
                        <% post.imagens.forEach(imagem => { %>
                            <img src="<%= imagem.url %>" alt="<%= post.titulo %>" class="post-image">
                        <% }); %>
                    </div>
                <% } // carrega as imagens
                
                else { %>
                    <img src="/imgs/image-placeholder.jpg" alt="postagem sem imagem" class="post-image">
                <% } // caso não tenha imagem %>

                <h3 class="post-title"><%= post.titulo %></h3>
                <div class="post-actions">
                    <button class="post-action-btn">
                        <i class="fi fi-br-heart"></i>
                    </button>
                    <button class="post-action-btn">
                       <i class="fi fi-br-comment-alt"></i>
                    </button> 
                </div>
            </article>
        <% }); %>
    <% } %>

</section>

<% if (!(posts && posts.length > 0)) { // caso não tenha postagens, crie vc a primeira %>
    <div class="no-posts">
        <i class="fi fi-br-add-image"></i>
        <div class="no-posts-content">
            <h3>Nenhuma postagem encontrada</h3>
            <p>Seja o primeiro a compartilhar sua arte!</p>
            <button class="btn btn-primary" onclick="document.getElementById('btn-criar-postagem')?.click()">
                <i class="fi fi-br-multiple"></i>
                Criar Primeira Postagem
            </button>
        </div>
    </div>
<% } %>
